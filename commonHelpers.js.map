{"version":3,"file":"commonHelpers.js","sources":["../src/js/getPicturesByUserTag.js","../src/js/markupTemplate.js","../src/js/refs.js","../src/js/renderPhotos.js","../src/js/checkBtnStatus.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getPicturesByUserTag(userTag, pageCount) {\n  const API_KEY = '42263237-cb79a6606f476b00f134f6b96';\n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${userTag}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  const params = {\n    page: pageCount,\n    per_page: 15,\n  };\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","export function markupTemplate(hits) {\n  const galleryMarkup = hits\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n        <a\n          class=\"gallery-link\"\n          href='${largeImageURL}'\n        >\n          <img\n            class=\"gallery-image\"\n            src='${webformatURL}'\n            data-source=\"large-image.jpg\"\n            alt='${tags}'\n          />\n        </a>\n        <ul class=\"image-desc-list\">\n          <li class=\"image-desc-item\">\n            <h3 class=\"image-desc-title\">Likes</h3>\n            <p class=\"image-desc-text\">${likes}</p>\n          </li>\n          <li class=\"image-desc-item\">\n            <h3 class=\"image-desc-title\">Views</h3>\n            <p class=\"image-desc-text\">${views}</p>\n          </li>\n          <li class=\"image-desc-item\">\n            <h3 class=\"image-desc-title\">Comments</h3>\n            <p class=\"image-desc-text\">${comments}</p>\n          </li>\n          <li class=\"image-desc-item\">\n            <h3 class=\"image-desc-title\">Downloads</h3>\n            <p class=\"image-desc-text\">${downloads}</p>\n          </li>\n        </ul>\n      </li>`;\n      }\n    )\n    .join('');\n\n  return galleryMarkup;\n}","export const refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n  loader2: document.querySelector('.loader2'),\n  galleryItem: document.querySelector('.gallery-item'),\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { markupTemplate } from './markupTemplate';\nimport { refs } from './refs';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionSelector: 'img',\n  captionPosition: 'bottom',\n  captionsData: 'alt',\n});\n\nexport function renderPhotos(hits) {\n  const markup = markupTemplate(hits);\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n  lightbox.on('show.simplelightbox');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { refs } from './refs';\n\nexport function checkBtnStatus(data, page) {\n  const maxPage = Math.ceil(data.totalHits / 15);\n  console.log(maxPage);\n  const isLastPage = maxPage <= page;\n  if (isLastPage) {\n    refs.loadMoreBtn.classList.add('hidden');\n    iziToast.show({\n      position: 'bottomCenter',\n      color: 'yellow',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    refs.loadMoreBtn.classList.remove('hidden');\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getPicturesByUserTag } from './js/getPicturesByUserTag';\nimport { renderPhotos } from './js/renderPhotos';\nimport { refs } from './js/refs';\nimport { checkBtnStatus } from './js/checkBtnStatus';\nlet userTag;\nlet page;\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n\n  refs.gallery.innerHTML = '';\n  refs.loadMoreBtn.classList.add('hidden');\n\n  userTag = e.target.elements.search.value.trim();\n  page = 1;\n\n  if (!userTag) {\n    iziToast.error({\n      position: 'bottomCenter',\n      icon: '',\n      message: 'Please, write something',\n    });\n    return;\n  }\n\n  try {\n    const data = await getPicturesByUserTag(userTag, page);\n    refs.loader.classList.remove('hidden');\n    if (data.hits.length === 0) {\n      iziToast.error({\n        position: 'bottomCenter',\n        icon: '',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    } else {\n      renderPhotos(data.hits);\n      refs.loader.classList.add('hidden');\n      checkBtnStatus(data, page);\n    }\n  } catch (err) {\n    console.log(err);\n  }\n\n  e.target.reset();\n}\n\nasync function onLoadMore() {\n  page += 1;\n\n  refs.loadMoreBtn.classList.add('hidden');\n  refs.loader2.classList.remove('hidden');\n\n  try {\n    const data = await getPicturesByUserTag(userTag, page);\n    renderPhotos(data.hits);\n    checkBtnStatus(data, page);\n    refs.loader2.classList.add('hidden');\n  } catch (err) {\n    console.log(err);\n  }\n\n  const card = refs.gallery.firstElementChild.getBoundingClientRect();\n  const { height } = card;\n\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["getPicturesByUserTag","userTag","pageCount","url","params","axios","markupTemplate","hits","largeImageURL","webformatURL","tags","likes","views","comments","downloads","refs","lightbox","SimpleLightbox","renderPhotos","markup","checkBtnStatus","data","page","maxPage","iziToast","onFormSubmit","onLoadMore","e","err","card","height"],"mappings":"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"}